不管机器执行什么程序，归根结底其实只做了四件事：输入、计算、输出、存储。这就是所谓的IPOS（Input Processing Output Storage）循环，我把其中的计算和存储称为“机器之心”。

<!--more-->

单机之心
===

冯·诺依曼给计算机画了一张结构图，影响至今。

![](冯诺依曼结构.jpg)


所以，一台计算机往往有这么几部分：
- CPU
- 内存、硬盘
- 键盘
- 显示器

要把这些冰冷的金属器件做成心脏，还需要施以魔法。比如，CPU的指令集、内存分配和管理、硬盘的文件系统等。如果想要充分发挥这堆器件的作用，还需要加一个的操作系统。

集群之心
===

如果有多台计算机（集群），想要综合它们的力量来实现一个超级机器。比如，把孙悟空和唐僧做成一个“唐小空”，既能打能斗，也能善能佛，岂不更秒！

**假设**我们已经成功了，已经能够用超多台渣机组合成超级计算机。它的计算能力超强，能够跑单台机器上跑不了的程序；它的存储空间极大，能够存下你想要的所有资源；它可伸缩，可以轻松的添加或删除渣机；它可靠，多台渣机都有数据备份。

具体的实现方法是，给集群装上一套软件——Elephant（YY出来的软件）。

有了它，计算机们便同心同德了。

![](葫芦娃.jpg)

集群Elephant之心应该表现为，抽象多台渣机的计算能力为更强大的计算能力，抽象存储能力为更强大的存储能力。

![](Elephant核心.jpg)

比如，Elephant提供了E编程模型，使用这个模型加上E语言，开发的程序（比如`main.e`），就可以直接跑在Elephant之上，也就是分布式程序！至于如何调度，不需要操心，只要按照E语言的规范来写就可以！

比如，Elephant提供了E-DFS，即E分布式文件系统。

比如，Elephant还提供了命令行接口。

```
elephant put 1.txt /                              # 把本地计算机的1.txt放到E-DFS的/路径下
elephant run main.e efs:///1.txt efs:///out.txt   # 执行分布式程序main.e，输入为E-DFS的/1.txt，输出为/out.txt
elephant show                                     # 查看程序执行情况
elephant kill main.e                              # 杀死正在执行的分布式程序main.e
```

想想都有点小激动了有没有！

Hadoop之心
===

庆幸的是，Elephant真的存在。

真的有一头大象，可以达到我们想要的效果——[Hadoop](http://hadoop.apache.org/)。

![](hadoop-logo.jpg)

前面提到的编程模型，便是MapReduce。分布式文件系统则是HDFS。这两架马车——计算、存储，为其生态提供了有力的支撑。

`-- EOF --`
