不管机器（计算机）执行什么程序，归根结底其实只做了四件事：输入、计算、输出、存储。这就是所谓的IPOS（Input Processing Output Storage）循环，我把其中的计算和存储称为“机器之心”。

<!--more-->

单机之心
===

冯·诺依曼给计算机画了一张结构图，影响至今。

![](冯诺依曼结构.jpg)


所以，一台计算机往往有这么几部分：
- CPU
- 内存、硬盘
- 键盘
- 显示器

要把这些冰冷的金属器件做成心脏，还需要施以魔法，即硬件与软件的配合。

其中，计算应该包括：CPU这块电路板、CPU指令集；存储包括：磁盘（内存、外存）、内存的管理和外存的文件系统。

在“单机之心”的支持与规范之下，便可开发上层应用。五彩斑斓的花样应用，只源这“单机之心”。

集群之心
===

“救世主”Elephant
---

如果有多台计算机（集群），想要综合它们的能力来实现一个超级计算机。比如，把孙悟空和唐僧做成一个“唐小空”，既能打能斗，也能善能佛，这样去西天取经岂不更好。

所以，我们想要做一个能够覆盖多台计算机的超级心脏——“集群之心”。正是因为这“集群之心”，多台计算机才能够协作，集群才有意义。

**假设**我们已经成功实现了“集群之心”。

具体的方法是在每台计算机上安装一个软件，安装完后这些计算机能够协作，这样就构成了一台超级计算机。它具有更强的计算能力，更大的存储空间，提供可伸缩可靠的服务。

好吧，假设我们安装的这套软件叫作Elephant。

这灵丹妙药般的Elephant，一经计算机执行，便会像葫芦兄弟组成葫芦小金刚一样，同心同德，力大无穷。

![](葫芦娃.jpg)

Elephant实战
---

经过Elephant的催化，集群有了自己的心脏，具有更高的计算能力和存储能力。

如此强大的集群，不能只作展览品，应该也要用于实践，接口便是必须提供的。

![](Elephant核心.jpg)

比如，Elephant提供了E编程模型，使用这个模型加上E语言，开发的程序（比如`main.e`），就可以直接跑在Elephant之上，也就是分布式程序！至于如何调度，不需要考虑，只要按照E语言的规范来写就可以！

比如，Elephant提供了E-DFS，即E分布式文件系统。

比如，Elephant还提供了命令行接口，直接与Elephant交互。

```
elephant put 1.txt /                              # 把本地计算机的1.txt放到E-DFS的/路径下
elephant run main.e efs:///1.txt efs:///out.txt   # 执行分布式程序main.e，输入为E-DFS的/1.txt，输出为/out.txt
elephant show                                     # 查看程序执行情况
elephant kill main.e                              # 杀死正在执行的分布式程序main.e
```

可以看到，我们所面对的不再是多台计算机，或者说，我们压根就不知道就几台计算机。我们面对的是集群，而与集群交互的便是Elephant。

所以，我们在驯服Elephant，而Elephant在管理集群。

想想都有点小激动了有没有！

Hadoop之心
===

尽管前面的Elephant只是YY出来的东西，但是值得庆幸的是，真的有一头大象，可以达到我们想要的效果——[Hadoop](http://hadoop.apache.org/)。

![](hadoop-logo.jpg)

前面提到的编程模型，便是MapReduce。分布式文件系统则是HDFS。这两架马车——计算、存储，为Hadoop的生态提供了有力的支撑。

而Hadoop的王国里，还养着其它的奇珍异兽：Hive、HBase、Pig、Zookeeper等。

`-- EOF --`
