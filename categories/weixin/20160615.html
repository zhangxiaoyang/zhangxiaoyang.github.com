<!doctype html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="description" content="Yang的后花园，爱美工的程序员，zhangxiaoyang"/>
    <meta name="keywords" content="学习，思考，想法"/>
    <meta name="author" content="zhangxiaoyang"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <title>Yang的后花园</title>
    <link rel="shortcut icon" href="/favicon.ico"/>
    <link rel="stylesheet" type="text/css" href="/themes/default/css/style.css"/>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <meta name="google-site-verification" content="Fjy6iUBWNJ0NBNFFzR8ZxFrkCxJ9rvHeBBYPyue-HBw"/>
<link rel="stylesheet" type="text/css" href="/themes/default/css/scrollUp.css"/>
<link rel="stylesheet" type="text/css" href="/themes/default/css/prettify-solarized-dark.css"/>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?661930a9db32b395d0caee1a2c022527";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-46826647-1', 'auto');
  ga('send', 'pageview');
</script>

  </head>
  <body>
    <div id="container">
      <div id="wrap">
        <header id="header">
          <div id="banner" style="background: url(http://ww3.sinaimg.cn/large/005X3nNxjw1epeyfkp54aj30sg0fr0tj.jpg) no-repeat center center; background-size: cover;">
          </div>
          <div id="header-outer" class="outer">
            <div id="header-title" class="inner">
              <div class="logo">
                <img src="https://avatars3.githubusercontent.com/u/2735163?v=3&amp;s=460" alt="Profile Picture">
              </div>
              <div id="title">
                爱美工的程序员
              </div>
              <ul class="my-navigation">
                
                <li>
                  <a href="/index.html" title="Home">
                  <i class="fa fa-home" style="color: #3369e8;"> </i>
                  </a>
                </li>
                
                <li>
                  <a href="/category.html" title="Category">
                  <i class="fa fa-th-large" style="color: #3369e8;"> </i>
                  </a>
                </li>
                
                <li>
                  <a href="/about.html" title="About">
                  <i class="fa fa-user" style="color: #3369e8;"> </i>
                  </a>
                </li>
                
                <li>
                  <a href="/rss.xml" title="RSS">
                  <i class="fa fa-rss" style="color: #3369e8;"> </i>
                  </a>
                </li>
                
              </ul>
            </div>
          </div>
          <div id="header-inner" class="">
            <nav id="title-nav" style="display: none;">
              <span id="title-nav-items">
                
                  <a href="/index.html" title="Home">
                    <i class="fa fa-home"></i>
                  </a>
                
                  <a href="/category.html" title="Category">
                    <i class="fa fa-th-large"></i>
                  </a>
                
                  <a href="/about.html" title="About">
                    <i class="fa fa-user"></i>
                  </a>
                
                  <a href="/rss.xml" title="RSS">
                    <i class="fa fa-rss"></i>
                  </a>
                
              </span>
            </nav>
            <nav id="sub-nav">
              <a id="nav-search-btn" class="nav-icon" title="Search">
              </a>
            </nav>
            <div id="search-form-wrap">
              <form action="http://www.baidu.com/baidu" method="get" accept-charset="utf-8"
              class="search-form">
                <input type="search" name="word" maxlength="20" class="search-form-input"
                placeholder="搜索">
                <input type="submit" value="" class="search-form-submit">
                <input name="tn" type="hidden" value="bds">
                <input name="cl" type="hidden" value="3">
                <input name="ct" type="hidden" value="2097152">
                <input type="hidden" name="si" value="zhangxiaoyang.me">
              </form>
            </div>
          </div>
        </header>

<div class="outer">
  <section id="main">
    <article id="weixin/20160615" class="article article-type-post"
    itemscope="" itemprop="blogPost">
      <div class="article-inner">
        <header class="article-header">
          <h1 itemprop="name">
            <a class="article-title" href="/categories/weixin/20160615.html">
              可爱的爬虫（三）——调试器curl
            </a>
          </h1>
        </header>
        <footer class="article-footer">
          <ul class="article-time-list">
            <li class="article-time-list-item">
              <a class="article-time-list-link" href="/archive.html">
                2016-06-15 21:46:00
              </a>
            </li>
          </ul>
          <br/>
          <ul class="article-category-list">
            <li class="article-category-list-item">
              <a class="article-category-list-link" href="/category.html">
                微信备份
              </a>
            </li>
          </ul>
          <br/>
          <ul class="article-tag-list">
            
              <li class="article-tag-list-item">
                <a class="article-tag-list-link" href="/tag.html">
                  爬虫
                </a>
              </li>
            
              <li class="article-tag-list-item">
                <a class="article-tag-list-link" href="/tag.html">
                  curl
                </a>
              </li>
            
          </ul>
        </footer>
        <div class="article-entry" itemprop="articleBody">
          <div class="article-abstract"><h1 id="-curl">可爱的爬虫（三）——调试器curl</h1>
<p><img src="/drafts/categories/weixin/images/spider-curl.png" alt=""></p>
<p>curl，让爬虫可以在命令行里跳出浏览器的舞姿。</p>
</div>
<h2 id="1-wget-">1 wget的尴尬</h2>
<p>wget可以带我们浪迹天涯却不能笑傲江湖。wget张开大嘴等待着待抓取的URL，我们把浏览器地址栏中的URL喂给他，相信美好的事情总会发生。结果，一脸懵逼，杂乱的HTML中却找不到一丝数据的踪影。</p>
<p>我门从浏览器中看到了美丽新世界，wget却说啥也没有，你是不是逗我。这便是wget的尴尬，同样的URL却不能得到与浏览器一致的数据。</p>
<p>比如，淘宝手机版“m.taobao.com”，检索“在你身边为你设计”会跳到这个页面：</p>
<p><img src="/drafts/categories/weixin/images/taobao-screenshot.png" alt=""></p>
<p>执行<code>wget -q -O- URL</code>，抓下来是这样的（URL复制自浏览器）：</p>
<pre><code class="lang-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;title&gt;搜索宝贝&lt;/title&gt;
    &lt;meta content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0&quot; name=&quot;viewport&quot; /&gt;
    &lt;meta content=&quot;yes&quot; name=&quot;apple-mobile-web-app-capable&quot; /&gt;
    &lt;meta content=&quot;black&quot; name=&quot;apple-mobile-web-app-status-bar-style&quot; /&gt;
    &lt;meta name=&quot;format-detection&quot; content=&quot;telephone=no&quot; /&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;//g.alicdn.com/tb/searchh5/0.5.7/searchlist/searchlist.css&quot;/&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        window.SearchH5={
            apiConfig:{
                //公有参数
                params:{
                    &#39;event_submit_do_new_search_auction&#39;: &#39;1&#39;,
                     &#39;_input_charset&#39;: &#39;utf-8&#39;,
                     &#39;topSearch&#39;: &#39;1&#39;,
                     &#39;atype&#39;: &#39;b&#39;,
                     &#39;searchfrom&#39;: &#39;1&#39;,
                     &#39;action&#39;: &#39;home:redirect_app_action&#39;,
                     &#39;from&#39;: &#39;1&#39;,
                     &#39;q&#39;: &#39;在你身边为你设计&#39;,
                     &#39;sst&#39;:&#39;1&#39;,
                &#39;n&#39;:20,
                &#39;buying&#39;:&#39;buyitnow&#39;
            },
            // 列表数据url与其需要携带的参数
            listApi:{
                url:&quot;//s.m.taobao.com/search?&quot;,
                    params:{
                    m:&#39;api4h5&#39;,
                    abtest:&#39;21&#39;,
                    wlsort:&#39;21&#39;
                }
            },
            navApi:{
                url:&#39;//s.m.taobao.com/browse_nav_iphone.htm&#39;,
                    params:{}
                }
            }
        };
    &lt;/script&gt;
&lt;/head&gt;

&lt;body class=&quot;&quot;&gt;&lt;script&gt;
with(document)with(body)with(insertBefore(createElement(&quot;script&quot;),firstChild))setAttribute(&quot;exparams&quot;,&quot;category=&amp;userid=&amp;aplus&amp;yunid=&quot;,id=&quot;tb-beacon-aplus&quot;,src=(location&gt;&quot;https&quot;?&quot;//s&quot;:&quot;//a&quot;)+&quot;.tbcdn.cn/s/aplus_v2.js&quot;)
&lt;/script&gt;

&lt;!-- 手淘安装下载脚本 --&gt;
&lt;script src=&quot;//g.alicdn.com/tb/tracker/1.0.14/index.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;JSTracker.config(&#39;sampling&#39;, 1000);&lt;/script&gt;
&lt;script src=&quot;//g.alicdn.com/mtb/app-jump/0.5.8/??jump_css.js,combo.js,jump.js&quot;&gt;&lt;/script&gt;
&lt;!-- smartbanner --&gt;
&lt;script src=&quot;//h5.m.taobao.com/js/smartbanner/setting.js?t=20160615&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;//gw.alicdn.com/L1/584/183486/74a6066df1.js?t=20160615&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;//g.alicdn.com/mtb/??lib-
env/1.5.0/env.js,lib-httpurl/1.3.2/httpurl.js,lib-callapp/1.4.2/callapp.js,lib-smartbanner/0.4.0/smartbanner.js,lib-smartbanner/0.4.0/bis.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;//g.alicdn.com/sd/pointman/app/tb-h5/sufei-tb-h5.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;//g.alicdn.com/tb/searchh5/0.5.7/searchlist/searchlist.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;$.use(&quot;searchH5/pages/searchlist/_.index&quot;);&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>为什么同样的URL，wget却得不到与浏览器一致的数据？</p>
<h2 id="2-">2 浏览器的心智</h2>
<p>浏览器在访问URL的时候，还会附加上一些额外的信息。正是这些附加信息，导致了不一样的结果。如果把网站比作一个计算的黑盒子，现在的情况是输入不一样了，所以输出也不一样就没什么好奇怪的了。</p>
<p>浏览器这绝对不是闲着没事儿找事儿，她的精神和扶老奶奶过马路是一样一样的。正是有了她的多管闲事添加了附加信息，才有了更加缤纷多彩的Web世界。</p>
<p>附加信息的官方名字叫做“HTTP首部”（HTTP header），首部由多个字段（HTTP header field）组成，每一个字段会对应一个值。经常使用的字段有User-Agent、Cookie、Set-Cookie等，所有的字段见：<a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields">https://en.wikipedia.org/wiki/List_of_HTTP_header_fields</a>。</p>
<p>一起唠一唠常用的这几个字段。</p>
<p>1) User-Agent</p>
<p>不同的浏览器拥有不同的User-Agent，通过“www.whatsmyua.com”可以看到自己的User-Agent。有些财大气粗的网站为了提升用户体验，会开发两个版本，分别用于适配移动端和PC端，比如“m.taobao.com”和“www.taobao.com”。对于开发Web服务器的小伙伴来说，可以通过判断浏览器发过来的User-Agent来返回响应的页面。</p>
<p>2) Cookie与Set-Cookie</p>
<p>没有Cookie的年代，网站无法区分当前的访问者。于是，Cookie应运而生，浏览器在访问网站的时候，网站在返回页面的同时在响应（Response）的首部中加入<code>Set-Cookie: XXX</code>。浏览器收到后便将<code>XXX</code>藏了起来，在今后访问该网站的时候，请求（Request）的首部中会加入<code>Cookie: XXX</code>，这样网站那边便能够区分访问者了。一旦能够有一个手段区分访问者，便可以提供个性化访问啦。通常，网站会提供登陆的机制来验证访问者，以判断其是否有资格访问该服务。所以，在这种情况下，我们需要妥善保管每个网站发给我们的Cookie值，以免造成隐私泄露。</p>
<p>不知不觉中，浏览器做了这么多事情。如果把浏览器修改数据（首部字段）比作网站的“阳谋”，那么网站的“阴谋”也多着呢。比如，修改网页骨架（DOM）、网页样式（CSS）、网页跳转等等。当网站的后端开发者在搞“阳谋”的时候，其前端开发者也开始用JavaScript来搞“阴谋”了。最恐怖的是他们阴阳合璧，黑白双煞，玉女心经。</p>
<p>所以，我们不得不分析他们的前后端逻辑，恰到好处添加首部字段，完美模拟JavaScript的执行逻辑，让爬虫可以在命令行里跳出浏览器的舞姿。</p>
<h2 id="3-curl">3 调试器curl</h2>
<h3 id="2-1-curl-">2.1 curl上手</h3>
<p>curl，和wget一样，可以用作下载器， 但他的优势远不止于此。当我们需要搞清楚网站的逻辑，分析其前后端交互的时候，curl的威力便显现出来。</p>
<p>1) 抓取“zhangxiaoyang.me”可以这样做：</p>
<pre><code>$ curl zhangxiaoyang.me
</code></pre><p>然后会将“zhangxiaoyang.me”对应的页面抓取并打印。</p>
<p>2) 如果我们想将其输出到文件中，可以这样：</p>
<pre><code>$ curl -o homepage.txt zhangxiaoyang.me
</code></pre><p>3) 以上命令会输出进度条，关闭进度条：</p>
<pre><code>$ curl -s -o homepage.txt zhangxiaoyang.me
</code></pre><p>4) 如果不幸网络断开或出现了异常情况导致中途下载失败了，不要怕，这在下载大文件的时候尤为重要：</p>
<pre><code>$ curl -c zhangxiaoyang.me
</code></pre><p>5) 查看Response：</p>
<pre><code>$ curl -i zhangxiaoyang.me
</code></pre><p>会得到以下输出：</p>
<pre><code>HTTP/1.1 200 OK
Server: GitHub.com
Content-Type: text/html; charset=utf-8
Last-Modified: Fri, 10 Jun 2016 08:57:31 GMT
Access-Control-Allow-Origin: *
Expires: Wed, 15 Jun 2016 09:47:25 GMT
Cache-Control: max-age=600
X-GitHub-Request-Id: 67F5E014:77FC:607C940:576121D5
Content-Length: 69798
Accept-Ranges: bytes
Date: Wed, 15 Jun 2016 10:32:46 GMT
Via: 1.1 varnish
Age: 304
Connection: keep-alive
X-Served-By: cache-itm7425-ITM
X-Cache: HIT
X-Cache-Hits: 1
Vary: Accept-Encoding
X-Fastly-Request-ID: 451b9e855cc2435b5898ab8dea776a37d2c2688a

&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot;/&gt;
    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;/&gt;
    &lt;meta name=&quot;description&quot; content=&quot;爱美工的程序员&quot;/&gt;
    ...
</code></pre><p>其中，“200 OK”为HTTP状态码，表示请求和响应都是OK的。状态码可以分为1XX、2XX、3XX、4XX、5XX五类：</p>
<ul>
<li>1XX为信息性状态码，表示接收的请求正在处理；</li>
<li>2XX为成功状态码，表示请求正常处理完毕；</li>
<li>3XX为重定向状态码，表示需要进行附加操作以完成请求；</li>
<li>4XX为客户端错误状态码，表示服务器无法处理请求；</li>
<li>5XX为服务器错误状态码，表示服务器处理请求出错。</li>
</ul>
<p>6) 以上会输出Reponse首部和网页源代码，如果只想查看Response的首部：</p>
<pre><code>$ curl -I zhangxiaoyang.me
</code></pre><p>7) 同时查看Request和Response：</p>
<pre><code>$ curl -v zhangxiaoyang.me
</code></pre><p>8) 把自己伪装成浏览器吧：</p>
<pre><code>$ curl -A &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.63 Safari/537.36&quot; zhangxiaoyang.me
</code></pre><h3 id="2-2-curl-">2.2 curl知新</h3>
<p>1) 由于种种原因，有些URL不能一次抓取成功，可能需要多试几次（最多尝试3次）：</p>
<pre><code>$ curl --tries 3 zhangxiaoyang.me
</code></pre><p>2) 设置连接超时（3秒）：</p>
<pre><code>$ curl --connect-timeout 3 google.com
</code></pre><p>3) 同时抓取多个URL：</p>
<pre><code>$ curl URL1 URL2 ...
</code></pre><p>4) 抓取一个HTTP或FTP协议的URL（URL前缀分别是<code>http://</code>和<code>ftp://</code>），但是需要验证账号和密码：</p>
<pre><code>$ curl -u USERNAME:PASSWORD URL
</code></pre><p>5) 处理自动跳转的网站：</p>
<pre><code>$ curl -I -L www.sina.com
HTTP/1.1 301 Moved Permanently
Server: nginx
Date: Wed, 15 Jun 2016 12:09:52 GMT
Content-Type: text/html
Location: http://www.sina.com.cn/
Expires: Wed, 15 Jun 2016 12:11:52 GMT
Cache-Control: max-age=120
Age: 70
Content-Length: 178
X-Cache: HIT from xd33-90.sina.com.cn

HTTP/1.1 200 OK
Content-Type: text/html
Vary: Accept-Encoding
X-Powered-By: shci_v1.03
Server: nginx
Date: Wed, 15 Jun 2016 12:10:54 GMT
Last-Modified: Wed, 15 Jun 2016 12:09:08 GMT
Expires: Wed, 15 Jun 2016 12:11:54 GMT
Cache-Control: max-age=60
Age: 9
Content-Length: 576807
X-Cache: HIT from xd33-93.sina.com.cn
</code></pre><p>如果不处理跳转，则：</p>
<pre><code>$ curl -I www.sina.com
HTTP/1.1 301 Moved Permanently
Server: nginx
Date: Wed, 15 Jun 2016 12:10:10 GMT
Content-Type: text/html
Location: http://www.sina.com.cn/
Expires: Wed, 15 Jun 2016 12:12:10 GMT
Cache-Control: max-age=120
Age: 50
Content-Length: 178
X-Cache: HIT from xd33-91.sina.com.cn
</code></pre><p>6) 发一个GET请求（curl默认就是GET请求，所以无需加任何参数）：</p>
<pre><code>$ curl www.baidu.com/s?wd=%E5%9C%A8%E4%BD%A0%E8%BA%AB%E8%BE%B9%E4%B8%BA%E4%BD%A0%E8%AE%BE%E8%AE%A1
</code></pre><p>7) 发一个POST请求到URL：</p>
<pre><code>$ curl -d &#39;user=yang%20zhang&amp;password=test&#39; URL
OR
$ curl --data &#39;user=yang%20zhang&amp;password=test&#39; URL
</code></pre><p>8) 发一个POST请求到URL，并自动进行urlencode：</p>
<pre><code>$ curl --data-urlencode &#39;user=yang zhang&amp;password=test&#39; URL
</code></pre><p>9) 自定义请求URL时使用的方法：</p>
<pre><code>$ curl -X GET URL
$ curl -X POST URL
$ curl -X PUT URL
$ curl -X DELETE URL
</code></pre><p>10) 指定referer字段，标识我们是从哪个URL跳转过来的（网站可以以此来判别我们有没有盗链或者抓站）：</p>
<pre><code>$ curl -e http://zhangxiaoyang.me/index.html http://zhangxiaoyang.me/category.html
</code></pre><p>11) 附加一个自定义的首部字段，比如：</p>
<pre><code>$ curl -H &#39;Content-Type:application/json&#39; URL
</code></pre><p>12) 访问HTTPS协议的网站时指定本地证书文件LOCAL_PEM：</p>
<pre><code>$ curl -E LOCAL_PEM URL
</code></pre><h3 id="2-3-curl-">2.3 curl上传与下载</h3>
<p>1) 使用PUT方法将本地文件LOCAL_FILE上传至URL：</p>
<pre><code>$ curl -T LOCAL_FILE URL
</code></pre><p>2) 通过表单上传本地文件LOCAL_FILE：</p>
<p>假设form表单如下：</p>
<pre><code class="lang-html">&lt;form method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot; action=&quot;upload.cgi&quot;&gt;
  &lt;input type=&quot;file&quot; name=&quot;upload&quot;&gt;
  &lt;input type=&quot;submit&quot; name=&quot;press&quot; value=&quot;OK&quot;&gt;
&lt;/form&gt;
</code></pre>
<p>则：</p>
<pre><code>$ curl -F upload=LOCAL_FILE --form press=OK URL
</code></pre><p>3) 我们已经get的<code>-o</code>选项，可以用于下载一个文件：</p>
<pre><code>$ curl -o spider-logo.png http://zhangxiaoyang.me/drafts/categories/weixin/images/spider-logo.png
</code></pre><p>4) 简化以上写法：</p>
<pre><code>$ curl -O http://zhangxiaoyang.me/drafts/categories/weixin/images/spider-logo.png
</code></pre><p>5) 根据规则实现批量下载（抓取spider-logo.png和spider-wget.png）：</p>
<pre><code>$ curl -O &#39;http://zhangxiaoyang.me/drafts/categories/weixin/images/spider-{logo,wget}.png&#39;
</code></pre><p>6) 抓取URL/a/1.jpg~URL/a/100.jpg和URL/b/1.jpg~URL/b/100.jpg共计200张图片：</p>
<pre><code>$ curl -O &#39;URL/{a,b}/[1-100].jpg&#39;
</code></pre><p>注意：由于文件名重复，使得后面下载的100图片会覆盖前面下载的。</p>
<p>7) 解决上面的问题：</p>
<pre><code>$ curl #1_#2.jpg &#39;URL/{a,b}/[1-100].jpg&#39;
</code></pre><p>图片会存成<code>a_1.jpg</code>、<code>a_2.jpg</code>这样的格式，<code>#1</code>表示URL中出现的第一个变量。</p>
<h3 id="2-4-curl-cookie">2.4 curl处理Cookie</h3>
<p>1) 自行指定请求URL时附带的Cookie值：</p>
<pre><code>$ curl --cookie &quot;name=xxx&quot; URL
</code></pre><p>2) Cookie往往来源于上一次的Response，我们可以把Cookie存到本地：</p>
<pre><code>$ curl -c LOCAL_COOKIE URL
</code></pre><p>3) 下一次访问便可以使用该Cookie文件了，更加方便：</p>
<pre><code>$ curl -b LOCAL_COOKIE URL
</code></pre><h3 id="2-5-curl-wget-">2.5 curl与wget的对话</h3>
<p>curl：你都会啥绝活？</p>
<p>wget：我会抓站。</p>
<p>curl：我支持的协议比你多呢！</p>
<p>wget：我会抓站。</p>
<p>curl：我调试服务器方便。</p>
<p>wget：我会抓站。</p>
<p>curl：我爸是<code>libcurl</code>。</p>
<p>wget：我会抓站。</p>
<p>...</p>
<h2 id="-">参考</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields">https://en.wikipedia.org/wiki/List_of_HTTP_header_fields</a></li>
<li><a href="https://book.douban.com/subject/25863515/">图解HTTP</a></li>
<li><a href="https://curl.haxx.se/docs/httpscripting.html">https://curl.haxx.se/docs/httpscripting.html</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2011/09/curl.html">http://www.ruanyifeng.com/blog/2011/09/curl.html</a></li>
<li><a href="https://daniel.haxx.se/docs/curl-vs-wget.html">https://daniel.haxx.se/docs/curl-vs-wget.html</a></li>
<li><a href="https://www.douban.com/group/topic/2939425/">https://www.douban.com/group/topic/2939425/</a></li>
</ul>

        </div>
        <div id="disqus_thread"></div>
      </div>
    </article>
  </section>
</div>
        <footer id="footer">
          <div class="outer">
            <div id="footer-info" class="inner">
              © 2017 zhangxiaoyang.me
              <br>
              Powered by
              <a href="https://github.com/zhangxiaoyang/fow" target="_blank">
                Fow
              </a>
            </div>
          </div>
        </footer>
      </div>
      <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js" type="text/javascript"></script>
      <script src="/themes/default/js/jquery.scrollUp.min.js" type="text/javascript"></script>
      <script src="/themes/default/js/jquery.transform.js" type="text/javascript"></script>
      <script src="/themes/default/js/menu.js" type="text/javascript"></script>
      <script src="/themes/default/js/script.js" type="text/javascript"></script>
      <script src="/themes/default/js/scrollUp.js" type="text/javascript"></script>
      <script src="/themes/default/js/prettify.js" type="text/javascript"></script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
<script type="text/javascript">
$(window).load(function(){
  $('pre').addClass('prettyprint linenums');
  prettyPrint();
});
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],        
    inlineMath: [ ['$','$'], ['\\(','\\)'] ],
    displayMath: [ ['$$','$$'], ['\\[','\\]'] ]
  }
});
MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script type="text/javascript">
  $('.article-entry img').click(function() {
    window.open($(this).attr('src'), '_blank');
  });
</script>

<script>
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//zhangxiaoyang-me.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </div>
  </body>
</html>

